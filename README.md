# Whispin

åŒ¿åãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ - Flutterè£½ã®ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚¢ãƒ—ãƒª

## ğŸ“± æ¦‚è¦

Whispinã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåŒ¿åã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒƒãƒˆã‚’æ¥½ã—ã‚ã‚‹Flutterã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚ãƒ«ãƒ¼ãƒ ã‚’ä½œæˆã—ã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨æ™‚é–“åˆ¶é™ä»˜ãã®ãƒãƒ£ãƒƒãƒˆã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

### ä¸»ãªæ©Ÿèƒ½

- **åŒ¿åãƒãƒ£ãƒƒãƒˆ**: ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’ä½¿ç”¨ã—ãŸåŒ¿åãƒãƒ£ãƒƒãƒˆ
- **ãƒ«ãƒ¼ãƒ ãƒ™ãƒ¼ã‚¹**: ãƒ‘ãƒ–ãƒªãƒƒã‚¯/ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ ã®ä½œæˆãƒ»å‚åŠ 
- **æ™‚é–“åˆ¶é™**: 10åˆ†é–“ã®åˆ¶é™æ™‚é–“ä»˜ããƒãƒ£ãƒƒãƒˆï¼ˆå»¶é•·å¯èƒ½ï¼‰
- **è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ **: ãƒãƒ£ãƒƒãƒˆå¾Œã®ç›¸æ‰‹è©•ä¾¡
- **ãƒ•ãƒ¬ãƒ³ãƒ‰æ©Ÿèƒ½**: ãƒ¦ãƒ¼ã‚¶ãƒ¼é–“ã®ãƒ•ãƒ¬ãƒ³ãƒ‰ç”³è«‹ãƒ»ç®¡ç†
- **æ‹›å¾…æ©Ÿèƒ½**: ãƒ•ãƒ¬ãƒ³ãƒ‰ã‚’ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ ã«æ‹›å¾…
- **ãƒ–ãƒ­ãƒƒã‚¯æ©Ÿèƒ½**: ç‰¹å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ–ãƒ­ãƒƒã‚¯
- **ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³**: å»¶é•·å›æ•°ç„¡åˆ¶é™ãªã©ã®ç‰¹å…¸
- **ç®¡ç†è€…æ©Ÿèƒ½**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã€ãƒ­ã‚°é–²è¦§ã€ãŠå•ã„åˆã‚ã›å¯¾å¿œ
- **é€šçŸ¥æ©Ÿèƒ½**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥ï¼ˆãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€æ‹›å¾…ï¼‰
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³**: ãƒ¢ãƒã‚¤ãƒ«ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒ»ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—å¯¾å¿œ

---

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 
```
lib/
â”œâ”€â”€ config/                      # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
â”‚   â”œâ”€â”€ app_config.dart         # Themeè¨­å®š
â”‚   â”œâ”€â”€ environment.dart        # ç’°å¢ƒå¤‰æ•°ç®¡ç†
â”‚   â””â”€â”€ firebase_config.dart    # FirebaseåˆæœŸåŒ–
â”‚
â”œâ”€â”€ constants/                   # å®šæ•°å®šç¾©
â”‚   â”œâ”€â”€ app_constants.dart      # ã‚¢ãƒ—ãƒªå…¨ä½“ã®å®šæ•°
â”‚   â”œâ”€â”€ colors.dart             # ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ
â”‚   â”œâ”€â”€ routes.dart             # ãƒ«ãƒ¼ãƒˆåå®šç¾©
â”‚   â”œâ”€â”€ text_styles.dart        # ãƒ†ã‚­ã‚¹ãƒˆã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â””â”€â”€ responsive.dart         # ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–è¨­å®š
â”‚
â”œâ”€â”€ extensions/                  # æ‹¡å¼µãƒ¡ã‚½ãƒƒãƒ‰
â”‚   â”œâ”€â”€ context_extensions.dart # BuildContextæ‹¡å¼µ
â”‚   â”œâ”€â”€ datetime_extensions.dart # DateTimeæ‹¡å¼µ
â”‚   â”œâ”€â”€ list_extensions.dart    # Listæ‹¡å¼µ
â”‚   â””â”€â”€ string_extensions.dart  # Stringæ‹¡å¼µ
â”‚
â”œâ”€â”€ models/                      # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ user.dart               # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ chat_room.dart          # ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ friendship.dart         # ãƒ•ãƒ¬ãƒ³ãƒ‰ã‚·ãƒƒãƒ—ãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ friend_request.dart     # ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ invitation.dart         # æ‹›å¾…ãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ block.dart              # ãƒ–ãƒ­ãƒƒã‚¯ãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ administrator.dart      # ç®¡ç†è€…ãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ premium_log_model.dart  # ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ­ã‚°ãƒ¢ãƒ‡ãƒ«
â”‚   â””â”€â”€ question_message.dart   # ãŠå•ã„åˆã‚ã›ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
â”‚
â”œâ”€â”€ repositories/                # ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤
â”‚   â”œâ”€â”€ base_repository.dart    # åŸºåº•ãƒªãƒã‚¸ãƒˆãƒª
â”‚   â”œâ”€â”€ user_repository.dart    # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ chat_room_repository.dart # ãƒ«ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ friendship_repository.dart # ãƒ•ãƒ¬ãƒ³ãƒ‰é–¢ä¿‚
â”‚   â”œâ”€â”€ block_repository.dart   # ãƒ–ãƒ­ãƒƒã‚¯ç®¡ç†
â”‚   â””â”€â”€ premium_log_repository.dart # ãƒ­ã‚°ç®¡ç†
â”‚
â”œâ”€â”€ services/                    # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤
â”‚   â”œâ”€â”€ auth_service.dart       # èªè¨¼ç®¡ç†
â”‚   â”œâ”€â”€ chat_service.dart       # ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½
â”‚   â”œâ”€â”€ storage_service.dart    # ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ï¼ˆæŠ½è±¡ï¼‰
â”‚   â”œâ”€â”€ firestore_storage_service.dart # Firestoreå®Ÿè£…
â”‚   â”œâ”€â”€ invitation_service.dart # æ‹›å¾…æ©Ÿèƒ½ï¼ˆUIçµ±åˆç‰ˆï¼‰
â”‚   â”œâ”€â”€ friendship_service.dart # ãƒ•ãƒ¬ãƒ³ãƒ‰ç®¡ç†
â”‚   â”œâ”€â”€ block_service.dart      # ãƒ–ãƒ­ãƒƒã‚¯æ©Ÿèƒ½
â”‚   â”œâ”€â”€ fcm_service.dart        # ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥
â”‚   â”œâ”€â”€ notification_cache_service.dart # é€šçŸ¥ã‚­ãƒ£ãƒƒã‚·ãƒ¥
â”‚   â”œâ”€â”€ startup_invitation_service.dart # èµ·å‹•æ™‚æ‹›å¾…å‡¦ç†
â”‚   â”œâ”€â”€ user_auth_service.dart  # ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼
â”‚   â”œâ”€â”€ account_create_service.dart # ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
â”‚   â”œâ”€â”€ password_hasher.dart    # ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ–
â”‚   â””â”€â”€ premium_log_service.dart # ãƒ­ã‚°ç®¡ç†
â”‚
â”œâ”€â”€ providers/                   # çŠ¶æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ user_provider.dart      # ãƒ¦ãƒ¼ã‚¶ãƒ¼çŠ¶æ…‹
â”‚   â”œâ”€â”€ admin_provider.dart     # ç®¡ç†è€…çŠ¶æ…‹
â”‚   â”œâ”€â”€ chat_provider.dart      # ãƒãƒ£ãƒƒãƒˆçŠ¶æ…‹
â”‚   â””â”€â”€ premium_log_provider.dart # ãƒ­ã‚°çŠ¶æ…‹
â”‚
â”œâ”€â”€ screens/                     # UIç”»é¢
â”‚   â”œâ”€â”€ user/
â”‚   â”‚   â”œâ”€â”€ home_screen.dart    # ãƒ›ãƒ¼ãƒ ç”»é¢
â”‚   â”‚   â”œâ”€â”€ profile.dart        # ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
â”‚   â”‚   â”œâ”€â”€ chat_screen.dart    # ãƒãƒ£ãƒƒãƒˆç”»é¢
â”‚   â”‚   â”œâ”€â”€ room_create_screen.dart # ãƒ«ãƒ¼ãƒ ä½œæˆ
â”‚   â”‚   â”œâ”€â”€ room_join_screen.dart # ãƒ«ãƒ¼ãƒ å‚åŠ 
â”‚   â”‚   â”œâ”€â”€ friend_list_screen.dart # ãƒ•ãƒ¬ãƒ³ãƒ‰ä¸€è¦§
â”‚   â”‚   â”œâ”€â”€ block_list_screen.dart # ãƒ–ãƒ­ãƒƒã‚¯ä¸€è¦§
â”‚   â”‚   â”œâ”€â”€ notifications.dart  # é€šçŸ¥ä¸€è¦§
â”‚   â”‚   â”œâ”€â”€ user_login_page.dart # ãƒ­ã‚°ã‚¤ãƒ³
â”‚   â”‚   â”œâ”€â”€ account_create_screen.dart # æ–°è¦ç™»éŒ²
â”‚   â”‚   â””â”€â”€ question_chat_user.dart # ãŠå•ã„åˆã‚ã›
â”‚   â””â”€â”€ admin/
â”‚       â”œâ”€â”€ admin_home_screen.dart # ç®¡ç†è€…ãƒ›ãƒ¼ãƒ 
â”‚       â”œâ”€â”€ admin_login_screen.dart # ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³
â”‚       â”œâ”€â”€ premium_log_list_screen.dart # ãƒ­ã‚°ä¸€è¦§
â”‚       â””â”€â”€ admin_question_list_screen.dart # å•ã„åˆã‚ã›ç®¡ç†
â”‚
â”œâ”€â”€ widgets/                     # å†åˆ©ç”¨å¯èƒ½ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ
â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”œâ”€â”€ header.dart         # çµ±ä¸€ãƒ˜ãƒƒãƒ€ãƒ¼
â”‚   â”‚   â””â”€â”€ unified_widgets.dart # çµ±ä¸€UIéƒ¨å“
â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â””â”€â”€ app_page_scaffold.dart # å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”œâ”€â”€ evaluation_dialog.dart  # è©•ä¾¡ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
â”‚   â”œâ”€â”€ extension_request_dialog.dart # å»¶é•·ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ message_bubble.dart     # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
â”‚   â””â”€â”€ message_input_field.dart # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…¥åŠ›
â”‚
â”œâ”€â”€ routes/                      # ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
â”‚   â”œâ”€â”€ app_router.dart         # ãƒ«ãƒ¼ãƒˆç”Ÿæˆ
â”‚   â”œâ”€â”€ navigation_helper.dart  # ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³è£œåŠ©
â”‚   â””â”€â”€ routes_guard.dart       # ãƒ«ãƒ¼ãƒˆã‚¬ãƒ¼ãƒ‰
â”‚
â”œâ”€â”€ utils/                       # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ app_logger.dart         # ãƒ­ã‚®ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”œâ”€â”€ navigation_logger.dart  # ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚°
â”‚   â””â”€â”€ app_exceptions.dart     # ã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–
â”‚
â””â”€â”€ main.dart                    # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
```

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³

**Repository Pattern + Provider + Serviceå±¤**

```
UIå±¤ï¼ˆScreens/Widgetsï¼‰
    â†“ Provider
çŠ¶æ…‹ç®¡ç†å±¤ï¼ˆProvidersï¼‰
    â†“ Service
ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤ï¼ˆServicesï¼‰
    â†“ Repository
ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤ï¼ˆRepositoriesï¼‰
    â†“ Firestore
ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆFirebase Cloud Firestoreï¼‰
```

#### ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è²¬å‹™

- **UIå±¤**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- **Providerå±¤**: çŠ¶æ…‹ç®¡ç†ã€UIã¸ã®å¤‰æ›´é€šçŸ¥
- **Serviceå±¤**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã€è¤‡æ•°Repositoryã®èª¿æ•´
- **Repositoryå±¤**: Firestoreã‚¢ã‚¯ã‚»ã‚¹ã®æŠ½è±¡åŒ–ã€CRUDæ“ä½œ
- **Extensions**: Dartæ¨™æº–å‹ã®æ©Ÿèƒ½æ‹¡å¼µã€ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

---

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å¿…è¦è¦ä»¶

- Flutter SDK 3.5ä»¥ä¸Š
- Dart 3.2ä»¥ä¸Š
- Firebase CLI
- Node.js 16ä»¥ä¸Šï¼ˆFirebaseã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ç”¨ï¼‰

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †

1. **ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³**
```bash
git clone https://github.com/your-repo/whispin.git
cd whispin
```

2. **ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
```bash
flutter pub get
```

3. **Firebaseè¨­å®š**
```bash
# Firebase CLIã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g firebase-tools

# Firebaseã«ãƒ­ã‚°ã‚¤ãƒ³
firebase login

# Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åˆæœŸåŒ–
firebase init
```

4. **ç’°å¢ƒå¤‰æ•°ã®è¨­å®š**

`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼š
```env
# ç’°å¢ƒè¨­å®š
ENVIRONMENT=development

# Firebase ãƒ¢ãƒ¼ãƒ‰
FIREBASE_MODE=emulator  # emulator or production

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é¸æŠ
BACKEND=firebase        # firebase or aws

# ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰
DEBUG_MODE=true

# ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼è¨­å®š
EMULATOR_HOST=localhost
AUTH_EMULATOR_PORT=9099
FIRESTORE_EMULATOR_PORT=8080
DATABASE_EMULATOR_PORT=9000
```

5. **Firebaseæ§‹æˆãƒ•ã‚¡ã‚¤ãƒ«ã®ç”Ÿæˆ**
```bash
# FlutterFire CLIã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
dart pub global activate flutterfire_cli

# Firebaseæ§‹æˆã‚’è‡ªå‹•ç”Ÿæˆ
flutterfire configure
```

6. **Firebaseã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã®èµ·å‹•**ï¼ˆé–‹ç™ºç’°å¢ƒï¼‰
```bash
firebase emulators:start
```

7. **ã‚¢ãƒ—ãƒªã®èµ·å‹•**
```bash
flutter run
```

---

## ğŸ”¥ Firebaseæ§‹æˆ

### ä½¿ç”¨ã‚µãƒ¼ãƒ“ã‚¹

- **Firebase Authentication**: ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼
- **Cloud Firestore**: NoSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- **Firebase Cloud Messaging (FCM)**: ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥
- **Firebase Emulator**: ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ

### Firestoreã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³æ§‹é€ 

```
users/                           # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
  {userId}/
    - id: string (Email)
    - password: string (hashed)
    - firstName: string
    - lastName: string
    - nickname: string
    - phoneNumber: string?
    - rate: number
    - premium: boolean
    - roomCount: number
    - createdAt: timestamp
    - lastUpdatedPremium: timestamp?
    - deletedAt: timestamp?
    - fcmToken: string?
    - fcmTokenUpdatedAt: timestamp?

rooms/                           # ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ 
  {roomId}/
    - id: string
    - topic: string
    - status: number (0: å¾…æ©Ÿ, 1: ä¼šè©±ä¸­, 2: çµ‚äº†)
    - id1: string (creator)
    - id2: string? (participant)
    - comment1: string?
    - comment2: string?
    - extensionCount: number
    - extension: number
    - startedAt: timestamp
    - expiresAt: timestamp
    - private: boolean          # âœ… æ–°æ©Ÿèƒ½: Public/Private

friendships/                     # ãƒ•ãƒ¬ãƒ³ãƒ‰ã‚·ãƒƒãƒ—
  {friendshipId}/
    - id: string
    - userId: string
    - friendId: string
    - active: boolean
    - createdAt: timestamp

friendRequests/                  # ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
  {requestId}/
    - id: string
    - senderId: string
    - receiverId: string
    - status: string (pending/accepted/rejected)
    - createdAt: timestamp
    - respondedAt: timestamp?

blocks/                          # ãƒ–ãƒ­ãƒƒã‚¯
  {blockId}/
    - id: string
    - blockerId: string
    - blockedId: string
    - active: boolean
    - createdAt: timestamp

invitations/                     # ãƒ«ãƒ¼ãƒ æ‹›å¾…
  {invitationId}/
    - id: string
    - roomId: string
    - inviterId: string
    - inviteeId: string
    - status: string (pending/accepted/rejected/expired)
    - createdAt: timestamp
    - respondedAt: timestamp?
    - expiresAt: timestamp

evaluations/                     # ãƒ¦ãƒ¼ã‚¶ãƒ¼è©•ä¾¡
  {evaluationId}/
    - id: string
    - evaluatorId: string
    - evaluatedId: string
    - rating: string (thumbs_up/thumbs_down)
    - createdAt: timestamp

extensionRequests/               # å»¶é•·ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
  {requestId}/
    - id: string
    - roomId: string
    - requesterId: string
    - status: string (pending/approved/rejected)
    - createdAt: timestamp

administrator/                   # ç®¡ç†è€…
  {email}/
    - Password: string
    - Role: string
    - LastLogin: timestamp?

QuestionChat/                    # ãŠå•ã„åˆã‚ã›
  {chatId}/
    - UserID: string
    - AdminID: string?
    - LastMessage: string
    - UpdatedAt: timestamp
    - Status: string (pending/in_progress/resolved)
    
    Messages/                    # ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
      {messageId}/
        - ID: string
        - IsAdmin: boolean
        - Text: string
        - CreatedAt: timestamp
        - Read: boolean

Log_Premium/                     # ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ­ã‚°
  {logId}/
    - ID: string (Email)
    - Timestamp: timestamp
    - Detail: string (å¥‘ç´„/è§£ç´„)

PremiumCounter/                  # ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ä¼šå“¡æ•°ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼
  counter/
    - count: number
    - lastUpdated: timestamp
```

---

## ğŸ“¦ ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

```yaml
dependencies:
  flutter:
    sdk: flutter
  
  # UI/UX
  google_fonts: ^6.3.2
  
  # Firebase
  firebase_core: ^4.2.1
  firebase_auth: ^6.1.2
  cloud_firestore: ^6.1.0
  firebase_messaging: ^15.2.1
  
  # ãƒ­ãƒ¼ã‚«ãƒ«é€šçŸ¥
  flutter_local_notifications: ^18.0.1
  
  # çŠ¶æ…‹ç®¡ç†
  provider: ^6.1.2
  
  # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
  http: ^1.6.0
  crypto: ^3.0.3
  shared_preferences: ^2.2.2
  intl: ^0.19.0
  path_provider: ^2.1.5
  flutter_dotenv: ^5.2.1
  
  # ãã®ä»–
  image_picker: ^1.2.1

dev_dependencies:
  flutter_test:
    sdk: flutter
  flutter_lints: ^6.0.0
```

---

## ğŸ¯ ä¸»è¦æ©Ÿèƒ½ã®å®Ÿè£…è©³ç´°

### 1. èªè¨¼ã‚·ã‚¹ãƒ†ãƒ 

**Firebase Authentication + Firestoreé€£æº + ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ–**

```dart
// services/account_create_service.dart
Future<bool> register({
  required User user,
  required String password,
  required StorageService storageService,
}) async {
  // 1. ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒãƒƒã‚·ãƒ¥åŒ–
  final salt = PasswordHasher.generateSalt();
  final passwordHash = PasswordHasher.hashPassword(password, salt);
  
  // 2. Firebase Authã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
  final credential = await _auth.createUserWithEmailAndPassword(
    email: user.id,
    password: password,
  );
  
  // 3. Firestoreã«ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ä¿å­˜
  final userWithPassword = User(
    id: user.id,
    password: passwordHash,
    // ãã®ä»–ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰...
  );
  
  storageService.users.add(userWithPassword);
  await storageService.save();
  
  return true;
}
```

### 2. ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ/ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒ«ãƒ¼ãƒ æ©Ÿèƒ½

**ãƒ«ãƒ¼ãƒ ä½œæˆæ™‚ã«ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼è¨­å®šã‚’é¸æŠ**

```dart
// screens/user/room_create_screen.dart
final newRoom = ChatRoom(
  id: roomId,
  topic: roomName,
  status: AppConstants.roomStatusWaiting,
  id1: currentUserEmail,
  id2: null,
  private: _isPrivate, // âœ… ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼è¨­å®š
  // ...
);

await _roomRepository.create(newRoom, id: roomId);
```

**æ¤œç´¢ãƒ»å‚åŠ æ©Ÿèƒ½ã§ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ ã‚’é™¤å¤–**

```dart
// services/chat_service.dart
final filteredRooms = rooms.where((room) {
  // ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ ã¯æ¤œç´¢çµæœã‹ã‚‰é™¤å¤–
  if (room.private) {
    return false;
  }
  // ãã®ä»–ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ¡ä»¶...
}).toList();
```

### 3. ãƒ•ãƒ¬ãƒ³ãƒ‰æ‹›å¾…æ©Ÿèƒ½ï¼ˆUIçµ±åˆç‰ˆï¼‰

**InvitationServiceã§ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤ºã¾ã§å‡¦ç†**

```dart
// services/invitation_service.dart
Future<void> showInviteFriendDialog({
  required BuildContext context,
  required String roomId,
  required String currentUserId,
}) async {
  // ãƒ•ãƒ¬ãƒ³ãƒ‰ä¸€è¦§ã‚’å–å¾—
  final friendships = _storageService.friendships.where((f) {
    return f.active && 
           (f.userId == currentUserId || f.friendId == currentUserId);
  }).toList();
  
  // ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤º
  await showDialog(
    context: context,
    builder: (ctx) => AlertDialog(
      title: Text('ãƒ•ãƒ¬ãƒ³ãƒ‰ã‚’æ‹›å¾…'),
      content: ListView.builder(
        itemCount: friends.length,
        itemBuilder: (context, index) {
          final friend = friends[index];
          return ListTile(
            title: Text(friend['name']),
            trailing: ElevatedButton(
              onPressed: () async {
                await sendInvitation(
                  roomId: roomId,
                  inviterId: currentUserId,
                  inviteeId: friend['id'],
                );
                Navigator.pop(ctx);
              },
              child: Text('æ‹›å¾…'),
            ),
          );
        },
      ),
    ),
  );
}
```

### 4. é€šçŸ¥ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚·ã‚¹ãƒ†ãƒ 

**5åˆ†é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥ + è‡ªå‹•ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥**

```dart
// services/notification_cache_service.dart
class NotificationCacheService {
  static const Duration _cacheDuration = Duration(minutes: 5);
  
  int _friendRequestCount = 0;
  int _invitationCount = 0;
  DateTime? _lastFetchedAt;
  Timer? _autoRefreshTimer;
  
  Future<int> getCount({
    required String userId,
    bool forceRefresh = false,
  }) async {
    // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæœ‰åŠ¹ãªã‚‰å³è¿”ã™
    if (!forceRefresh && isCacheValid) {
      return totalCount;
    }
    
    // ç„¡åŠ¹ãªã‚‰å†å–å¾—
    await _fetch(userId);
    return totalCount;
  }
  
  void startAutoRefresh(String userId) {
    _autoRefreshTimer = Timer.periodic(_cacheDuration, (_) async {
      await _fetch(userId);
    });
  }
}
```

### 5. ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³

**Contextæ‹¡å¼µãƒ¡ã‚½ãƒƒãƒ‰ã§ç°¡å˜ã«ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ**

```dart
// constants/responsive.dart
extension ResponsiveContext on BuildContext {
  bool get isMobile => ResponsiveHelper.isMobile(this);
  bool get isTablet => ResponsiveHelper.isTablet(this);
  bool get isDesktop => ResponsiveHelper.isDesktop(this);
  
  double responsiveFontSize(double baseFontSize) {
    return ResponsiveHelper.getResponsiveFontSize(this, baseFontSize);
  }
}

// ä½¿ç”¨ä¾‹
Widget build(BuildContext context) {
  final isMobile = context.isMobile;
  final fontSize = context.responsiveFontSize(16);
  
  return Text(
    'ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ†ã‚­ã‚¹ãƒˆ',
    style: TextStyle(fontSize: fontSize),
  );
}
```

### 6. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒƒãƒˆ

**Streamã¨Timerã®ä½µç”¨ã§æ­£ç¢ºãªã‚¿ã‚¤ãƒãƒ¼ç®¡ç†**

```dart
// services/chat_service.dart
void startRoomTimer(String roomId, DateTime expiresAt) {
  _roomTimers[roomId]?.cancel();
  
  final duration = expiresAt.difference(DateTime.now());
  
  if (duration.isNegative) {
    deleteRoom(roomId);
    return;
  }
  
  _roomTimers[roomId] = Timer(duration, () async {
    await deleteRoom(roomId);
  });
}
```

### 7. çµ±ä¸€ãƒ­ã‚®ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ 

**ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ› + ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ› + Dart DevToolsé€£æº**

```dart
// utils/app_logger.dart
logger.section('å‡¦ç†é–‹å§‹', name: 'ServiceName');
logger.start('å‡¦ç†ä¸­...', name: 'ServiceName');
logger.success('æˆåŠŸ', name: 'ServiceName');
logger.error('ã‚¨ãƒ©ãƒ¼: $e', name: 'ServiceName', error: e, stackTrace: stack);
```

---

## ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### å®Ÿè£…æ¸ˆã¿ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½

1. **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ–**: PBKDF2ãƒ™ãƒ¼ã‚¹ï¼ˆ10,000å›ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
2. **ã‚¿ã‚¤ãƒŸãƒ³ã‚°æ”»æ’ƒå¯¾ç­–**: å®šæ•°æ™‚é–“æ¯”è¼ƒã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
3. **è«–ç†å‰Šé™¤**: `deletedAt`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã‚ˆã‚‹å‰Šé™¤ç®¡ç†
4. **ãƒ–ãƒ­ãƒƒã‚¯æ©Ÿèƒ½**: ä¸é©åˆ‡ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ–ãƒ­ãƒƒã‚¯
5. **ç®¡ç†è€…èªè¨¼**: Firestoreç®¡ç†è€…ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ã®æ¨©é™ç¢ºèª
6. **å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ã®å¾¹åº•çš„ãªæ¤œè¨¼

### Firestore Securityãƒ«ãƒ¼ãƒ«ä¾‹

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
    match /users/{userId} {
      allow read: if request.auth != null;
      allow write: if request.auth.uid == userId;
    }
    
    // ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ 
    match /rooms/{roomId} {
      allow read: if request.auth != null;
      allow create: if request.auth != null;
      allow update: if request.auth != null && 
        (resource.data.id1 == request.auth.token.email || 
         resource.data.id2 == request.auth.token.email);
    }
    
    // ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
    match /friendRequests/{requestId} {
      allow read: if request.auth != null && 
        (resource.data.senderId == request.auth.token.email ||
         resource.data.receiverId == request.auth.token.email);
      allow create: if request.auth != null;
      allow update: if request.auth != null &&
        resource.data.receiverId == request.auth.token.email;
    }
    
    // æ‹›å¾…
    match /invitations/{invitationId} {
      allow read: if request.auth != null &&
        (resource.data.inviterId == request.auth.token.email ||
         resource.data.inviteeId == request.auth.token.email);
      allow create: if request.auth != null;
      allow update: if request.auth != null &&
        resource.data.inviteeId == request.auth.token.email;
    }
  }
}
```

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆ

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# å˜ä½“ãƒ†ã‚¹ãƒˆ
flutter test

# çµ±åˆãƒ†ã‚¹ãƒˆ
flutter test integration_test/

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
flutter test --coverage
genhtml coverage/lcov.info -o coverage/html
```

---

## ğŸ“± ãƒ“ãƒ«ãƒ‰

### Android
```bash
# ãƒ‡ãƒãƒƒã‚°ãƒ“ãƒ«ãƒ‰
flutter build apk --debug

# ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰
flutter build apk --release

# App Bundleï¼ˆGoogle Playæ¨å¥¨ï¼‰
flutter build appbundle --release
```

### iOS
```bash
# ãƒ‡ãƒãƒƒã‚°ãƒ“ãƒ«ãƒ‰
flutter build ios --debug

# ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰
flutter build ios --release
```

### Web
```bash
# ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰
flutter build web --release

# ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ï¼ˆFirebase Hostingï¼‰
firebase deploy --only hosting
```

---

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

**Q: Firebaseã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã«æ¥ç¶šã§ããªã„**

```bash
# ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª
firebase emulators:start

# ãƒãƒ¼ãƒˆç¢ºèª
lsof -i :8080  # Firestore
lsof -i :9099  # Auth

# .envãƒ•ã‚¡ã‚¤ãƒ«ã®è¨­å®šç¢ºèª
FIREBASE_MODE=emulator
EMULATOR_HOST=localhost
```

**Q: ãƒ­ã‚°ã‚¤ãƒ³å¾Œã«ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œãªã„**

```dart
// HomeScreenã®didChangeDependencies()ã§ç¢ºèª
@override
void didChangeDependencies() {
  super.didChangeDependencies();
  final userProvider = context.read<UserProvider>();
  
  if (userProvider.currentUser == null && !userProvider.isLoading) {
    final email = FirebaseAuth.instance.currentUser?.email;
    if (email != null) {
      userProvider.loadUserData(email);
    }
  }
}
```

**Q: é€šçŸ¥æ•°ãŒæ›´æ–°ã•ã‚Œãªã„**

```dart
// NotificationCacheServiceã®å‹•ä½œç¢ºèª
final cacheService = context.read<NotificationCacheService>();

// å¼·åˆ¶ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥
await cacheService.getCount(
  userId: currentUserId,
  forceRefresh: true,
);

// ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ–
cacheService.invalidateCache();
```

**Q: ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ ãŒæ¤œç´¢çµæœã«è¡¨ç¤ºã•ã‚Œã‚‹**

```dart
// ChatService.searchRooms()ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ç¢ºèª
final filteredRooms = allRooms.where((room) {
  // ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ ã¯é™¤å¤–ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
  if (room.private) {
    logger.debug('é™¤å¤–: ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ  - ${room.topic}');
    return false;
  }
  return true;
}).toList();
```

---

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ­“è¿ã—ã¾ã™ï¼

### é–‹ç™ºãƒ•ãƒ­ãƒ¼

1. ãƒ•ã‚©ãƒ¼ã‚¯
2. æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒä½œæˆ (`git checkout -b feature/amazing-feature`)
3. ã‚³ãƒŸãƒƒãƒˆ (`git commit -m 'Add amazing feature'`)
4. ãƒ—ãƒƒã‚·ãƒ¥ (`git push origin feature/amazing-feature`)
5. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆä½œæˆ

### ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

- Dartå…¬å¼ã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰ã«æº–æ‹ 
- ã™ã¹ã¦ã®publicãƒ¡ã‚½ãƒƒãƒ‰ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚³ãƒ¡ãƒ³ãƒˆè¨˜è¼‰
- `flutter analyze`ã§ã‚¨ãƒ©ãƒ¼ã‚¼ãƒ­ã‚’ç¶­æŒ
- `logger`ã‚’ä½¿ç”¨ã—ãŸè©³ç´°ãªãƒ­ã‚°å‡ºåŠ›

---

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

## ğŸ‘¥ ä½œæˆè€…

- **é–‹ç™ºãƒãƒ¼ãƒ **: Whispin Development Team
- **ãŠå•ã„åˆã‚ã›**: support@whispin.app

---

## ğŸ“š å‚è€ƒè³‡æ–™

- [Flutterå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://flutter.dev/docs)
- [Firebaseå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://firebase.google.com/docs)
- [Provider ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸](https://pub.dev/packages/provider)
- [Cloud Firestore ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹](https://firebase.google.com/docs/firestore/best-practices)

---

## ğŸ—ºï¸ ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### å®Ÿè£…æ¸ˆã¿ï¼ˆv1.0ï¼‰
- âœ… åŸºæœ¬ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½
- âœ… ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ/ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒ«ãƒ¼ãƒ 
- âœ… ãƒ•ãƒ¬ãƒ³ãƒ‰æ‹›å¾…ã‚·ã‚¹ãƒ†ãƒ 
- âœ… é€šçŸ¥ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚·ã‚¹ãƒ†ãƒ 
- âœ… ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³
- âœ… ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³
- âœ… ç®¡ç†è€…æ©Ÿèƒ½

### ä»Šå¾Œã®äºˆå®šï¼ˆv1.1ä»¥é™ï¼‰
- [ ] ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ï¼ˆFCMå®Œå…¨çµ±åˆï¼‰
- [ ] ç”»åƒãƒ»ãƒ•ã‚¡ã‚¤ãƒ«å…±æœ‰
- [ ] ã‚°ãƒ«ãƒ¼ãƒ—ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½
- [ ] AIè‡ªå‹•ç¿»è¨³
- [ ] ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ
- [ ] Webç‰ˆã®æœ€é©åŒ–
- [ ] E2Eæš—å·åŒ–
- [ ] ãƒœã‚¤ã‚¹ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½

---

## ğŸ“Š çµ±è¨ˆæƒ…å ±

- **ç·ã‚³ãƒ¼ãƒ‰è¡Œæ•°**: ~25,000è¡Œ
- **ãƒ¢ãƒ‡ãƒ«æ•°**: 18å€‹
- **Repositoryæ•°**: 8å€‹
- **ã‚µãƒ¼ãƒ“ã‚¹æ•°**: 15å€‹
- **Provideræ•°**: 4å€‹
- **ç”»é¢æ•°**: 25ç”»é¢ä»¥ä¸Š
- **å…±é€šã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆæ•°**: 20å€‹ä»¥ä¸Š
- **æ‹¡å¼µãƒ¡ã‚½ãƒƒãƒ‰æ•°**: 30å€‹ä»¥ä¸Š

---

## ğŸ† ä¸»è¦ãªæŠ€è¡“çš„ç‰¹å¾´

1. **å®Œå…¨ãªRepository Patternå®Ÿè£…**: ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤ã®å®Œå…¨ãªæŠ½è±¡åŒ–
2. **Serviceå±¤ã§ã®ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯é›†ç´„**: è¤‡æ•°Repositoryã®èª¿æ•´ã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†
3. **åŒ…æ‹¬çš„ãªãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ **: ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ã€Dart DevToolsçµ±åˆ
4. **å‹å®‰å…¨ãªæ‹¡å¼µãƒ¡ã‚½ãƒƒãƒ‰**: Contextã€DateTimeã€Listã€Stringç­‰ã®ä¾¿åˆ©ãªæ‹¡å¼µ
5. **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³**: ãƒ¢ãƒã‚¤ãƒ«ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒ»ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—å®Œå…¨å¯¾å¿œ
6. **é€šçŸ¥ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ€é©åŒ–**: 5åˆ†é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥ + è‡ªå‹•ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã§é€šä¿¡é‡å‰Šæ¸›
7. **çµ±ä¸€UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: å†åˆ©ç”¨å¯èƒ½ãªã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆç¾¤ã§é–‹ç™ºåŠ¹ç‡å‘ä¸Š
8. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: ã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–ã‚¯ãƒ©ã‚¹ã«ã‚ˆã‚‹çµ±ä¸€çš„ãªã‚¨ãƒ©ãƒ¼å‡¦ç†
9. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**: Streamã¨Timerã®åŠ¹ç‡çš„ãªä½¿ç”¨ã€ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯é˜²æ­¢
10. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é‡è¦–**: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ–ã€è«–ç†å‰Šé™¤ã€ã‚¿ã‚¤ãƒŸãƒ³ã‚°æ”»æ’ƒå¯¾ç­–

---

## ğŸ’¡ ã‚³ãƒ¼ãƒ‰è¨­è¨ˆã®ãƒã‚¤ãƒ³ãƒˆ

### Repository Pattern

```dart
// repositories/base_repository.dart
abstract class BaseRepository<T> {
  String get collectionName;
  T fromMap(Map<String, dynamic> map);
  Map<String, dynamic> toMap(T model);
  
  Future<String> create(T model, {String? id});
  Future<T?> findById(String id);
  Future<List<T>> findAll();
  Future<void> update(String id, T model);
  Future<void> delete(String id);
  
  Stream<T?> watchById(String id);
  Stream<List<T>> watchAll();
}
```

ã™ã¹ã¦ã®Repositoryã¯`BaseRepository`ã‚’ç¶™æ‰¿ã—ã€Firestoreã‚¢ã‚¯ã‚»ã‚¹ã‚’çµ±ä¸€çš„ã«ç®¡ç†ã—ã¾ã™ã€‚

### Serviceå±¤ã®ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯

```dart
// services/friendship_service.dart
Future<void> acceptFriendRequest(FriendRequest request) async {
  // 1. ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ‰¿èªçŠ¶æ…‹ã«æ›´æ–°
  await _friendRequestRepository.acceptRequest(request.id);
  
  // 2. Friendshipãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ä½œæˆ
  final friendship = Friendship(
    id: DateTime.now().millisecondsSinceEpoch.toString(),
    userId: request.senderId,
    friendId: request.receiverId,
    active: true,
    createdAt: DateTime.now(),
  );
  
  await _friendshipRepository.create(friendship, id: friendship.id);
}
```

Serviceå±¤ã§è¤‡æ•°ã®Repositoryæ“ä½œã‚’èª¿æ•´ã—ã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³çš„ãªå‡¦ç†ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

### Provider ã«ã‚ˆã‚‹çŠ¶æ…‹ç®¡ç†

```dart
// providers/user_provider.dart
class UserProvider extends ChangeNotifier {
  final UserRepository _userRepository;
  User? _currentUser;
  bool _isLoading = false;
  
  Future<void> loadUserData(String email) async {
    _isLoading = true;
    notifyListeners();
    
    _currentUser = await _userRepository.findByEmail(email);
    
    _isLoading = false;
    notifyListeners();
  }
  
  Future<void> updatePremiumStatus(bool isPremium) async {
    await _userRepository.updatePremiumStatus(_currentUser!.id, isPremium);
    
    _currentUser = _currentUser!.copyWith(
      premium: isPremium,
      lastUpdatedPremium: DateTime.now(),
    );
    
    notifyListeners();
  }
}
```

Providerã§çŠ¶æ…‹ã‚’ç®¡ç†ã—ã€UIã«å¤‰æ›´ã‚’é€šçŸ¥ã—ã¾ã™ã€‚

### æ‹¡å¼µãƒ¡ã‚½ãƒƒãƒ‰ã®æ´»ç”¨

```dart
// extensions/context_extensions.dart
extension ContextExtensions on BuildContext {
  void showSuccessSnackBar(String message) {
    ScaffoldMessenger.of(this).showSnackBar(
      SnackBar(
        content: Text(message),
        backgroundColor: Colors.green,
      ),
    );
  }
  
  Future<bool> showConfirmDialog({
    required String message,
    String confirmText = 'OK',
    String cancelText = 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«',
  }) async {
    // ãƒ€ã‚¤ã‚¢ãƒ­ã‚°å®Ÿè£…...
  }
}

// ä½¿ç”¨ä¾‹
context.showSuccessSnackBar('ä¿å­˜ã—ã¾ã—ãŸ');
final confirmed = await context.showConfirmDialog(
  message: 'æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ',
);
```

æ‹¡å¼µãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚³ãƒ¼ãƒ‰ã‚’ç°¡æ½”ã«ã—ã€å¯èª­æ€§ã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚

---

## ğŸ¨ UI/UXãƒ‡ã‚¶ã‚¤ãƒ³

### ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ

```dart
// constants/colors.dart
class AppColors {
  // ãƒ—ãƒ©ã‚¤ãƒãƒªã‚«ãƒ©ãƒ¼
  static const Color primary = Color(0xFF667EEA);
  static const Color secondary = Color(0xFF764BA2);
  
  // ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  static const LinearGradient primaryGradient = LinearGradient(
    colors: [primary, secondary],
  );
  
  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚«ãƒ©ãƒ¼
  static const Color success = Colors.green;
  static const Color error = Colors.red;
  static const Color warning = Colors.orange;
  static const Color info = Colors.blue;
}
```

### ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆ

- **ãƒ¢ãƒã‚¤ãƒ«**: < 600px
- **ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ**: 600px - 900px
- **ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—**: â‰¥ 900px
- **å¤§ç”»é¢ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—**: â‰¥ 1200px

### çµ±ä¸€UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```dart
// widgets/common/unified_widgets.dart

// æƒ…å ±ã‚«ãƒ¼ãƒ‰
InfoCard(
  icon: Icons.info_outline,
  title: 'ãƒ«ãƒ¼ãƒ æƒ…å ±',
  children: [
    InfoItem(text: 'æœ€å¤§2äººã¾ã§å‚åŠ å¯èƒ½'),
    InfoItem(text: '10åˆ†é–“ã®ãƒãƒ£ãƒƒãƒˆ'),
  ],
);

// ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³
GradientButton(
  label: 'ãƒ«ãƒ¼ãƒ ã‚’ä½œæˆ',
  icon: Icons.add_circle,
  onPressed: _createRoom,
);

// ç©ºã®çŠ¶æ…‹è¡¨ç¤º
EmptyStateWidget(
  icon: Icons.inbox,
  title: 'é€šçŸ¥ã¯ã‚ã‚Šã¾ã›ã‚“',
  subtitle: 'æ–°ã—ã„é€šçŸ¥ãŒå±Šãã¨ã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™',
);

// ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ãƒã‚¿ãƒ¼
UserAvatar(
  name: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼å',
  size: 56,
  gradient: AppColors.primaryGradient,
);
```

---

## ğŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### å®Ÿè£…æ¸ˆã¿æœ€é©åŒ–

1. **é€šçŸ¥ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚·ã‚¹ãƒ†ãƒ **: 5åˆ†é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§Firestoreã‚¯ã‚¨ãƒªå‰Šæ¸›
2. **Streamã¨Timerã®åŠ¹ç‡çš„ç®¡ç†**: ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯é˜²æ­¢ã®ãŸã‚é©åˆ‡ã«cancel/dispose
3. **lazy loading**: å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚’å¿…è¦ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å–å¾—
4. **ç”»åƒæœ€é©åŒ–**: image_pickerã§ã®åœ§ç¸®å‡¦ç†
5. **Stateç®¡ç†ã®æœ€é©åŒ–**: ä¸å¿…è¦ãªrebuildã‚’é˜²ã

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥

```dart
// services/notification_cache_service.dart
class NotificationCacheService {
  static const Duration _cacheDuration = Duration(minutes: 5);
  
  Future<int> getCount({
    required String userId,
    bool forceRefresh = false,
  }) async {
    // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæœ‰åŠ¹ãªã‚‰Firestoreã‚¢ã‚¯ã‚»ã‚¹ãªã—
    if (!forceRefresh && isCacheValid) {
      return totalCount;
    }
    
    // ç„¡åŠ¹ãªã‚‰å†å–å¾—ã—ã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ›´æ–°
    await _fetch(userId);
    return totalCount;
  }
}
```

---

## ğŸ” ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã¨ãƒ‡ãƒ¼ã‚¿ä¿è­·

### ãƒ‡ãƒ¼ã‚¿ç®¡ç†ãƒãƒªã‚·ãƒ¼

1. **è«–ç†å‰Šé™¤**: ç‰©ç†å‰Šé™¤ã§ã¯ãªã`deletedAt`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ã®è«–ç†å‰Šé™¤
2. **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ä¿è­·**: ãƒãƒƒã‚·ãƒ¥åŒ–ã•ã‚ŒãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ã¿ä¿å­˜
3. **å€‹äººæƒ…å ±ã®æœ€å°åŒ–**: å¿…è¦æœ€å°é™ã®æƒ…å ±ã®ã¿åé›†
4. **ãƒ–ãƒ­ãƒƒã‚¯æ©Ÿèƒ½**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä¸å¿«ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ãƒ–ãƒ­ãƒƒã‚¯å¯èƒ½
5. **ãƒ‡ãƒ¼ã‚¿æš—å·åŒ–**: Firestoreé€šä¿¡ã¯ã™ã¹ã¦SSL/TLSæš—å·åŒ–

### GDPRæº–æ‹ 

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªèº«ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤å¯èƒ½ï¼ˆè«–ç†å‰Šé™¤ï¼‰
- ãƒ‡ãƒ¼ã‚¿åé›†ã®é€æ˜æ€§ç¢ºä¿
- ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã®æ˜ç¤º

---

## ğŸŒ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### Firebase Hostingï¼ˆWebç‰ˆï¼‰

```bash
# ãƒ“ãƒ«ãƒ‰
flutter build web --release

# ãƒ‡ãƒ—ãƒ­ã‚¤
firebase deploy --only hosting
```

### Google Play Storeï¼ˆAndroidï¼‰

```bash
# App Bundleä½œæˆ
flutter build appbundle --release

# ç½²åç¢ºèª
jarsigner -verify -verbose -certs build/app/outputs/bundle/release/app-release.aab
```

### App Storeï¼ˆiOSï¼‰

```bash
# iOSãƒ“ãƒ«ãƒ‰
flutter build ios --release

# Xcodeã§ç½²åãƒ»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
open ios/Runner.xcworkspace
```

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

### ãŠå•ã„åˆã‚ã›

- **Email**: support@whispin.app
- **GitHub Issues**: [Issues](https://github.com/your-repo/whispin/issues)
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: [Wiki](https://github.com/your-repo/whispin/wiki)

### ã‚ˆãã‚ã‚‹è³ªå•ï¼ˆFAQï¼‰

**Q: ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³ã®æ–™é‡‘ã¯ï¼Ÿ**
A: ç¾åœ¨é–‹ç™ºä¸­ã®æ©Ÿèƒ½ã§ã™ã€‚è©³ç´°ã¯å¾Œæ—¥ç™ºè¡¨äºˆå®šã§ã™ã€‚

**Q: ãƒ‡ãƒ¼ã‚¿ã¯ã©ã“ã«ä¿å­˜ã•ã‚Œã¾ã™ã‹ï¼Ÿ**
A: ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã¯Google Cloud Firestoreï¼ˆæ—¥æœ¬ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚

**Q: ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’å®Œå…¨ã«å‰Šé™¤ã§ãã¾ã™ã‹ï¼Ÿ**
A: ã¯ã„ã€ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢ã‹ã‚‰ã€Œã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤ã€ã§è«–ç†å‰Šé™¤ãŒå¯èƒ½ã§ã™ã€‚

---

## ğŸ™ è¬è¾

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ä»¥ä¸‹ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ï¼š

- Flutter & Dart by Google
- Firebase by Google
- Provider package by Remi Rousselet
- ãã®ä»–å¤šæ•°ã®Flutterãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

ã™ã¹ã¦ã®ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚¿ãƒ¼ã«æ„Ÿè¬ã—ã¾ã™ã€‚

---

## ğŸ“ å¤‰æ›´å±¥æ­´

### v1.0.0 (2026-01-09)
- ğŸ‰ åˆå›ãƒªãƒªãƒ¼ã‚¹
- âœ¨ åŸºæœ¬ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½
- âœ¨ ãƒ•ãƒ¬ãƒ³ãƒ‰æ©Ÿèƒ½
- âœ¨ ãƒ–ãƒ­ãƒƒã‚¯æ©Ÿèƒ½
- âœ¨ ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³
- âœ¨ ç®¡ç†è€…æ©Ÿèƒ½

### v1.1.0 (äºˆå®š)
- ğŸš€ ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥å®Œå…¨çµ±åˆ
- ğŸŒ å¤šè¨€èªå¯¾å¿œ
- ğŸ¨ ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰
- ğŸ“± ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³å¼·åŒ–

---

**æœ€çµ‚æ›´æ–°**: 2026å¹´1æœˆ9æ—¥
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
**ãƒ©ã‚¤ã‚»ãƒ³ã‚¹**: MIT

---

## âš™ï¸ ç’°å¢ƒè¨­å®šã‚¬ã‚¤ãƒ‰

### é–‹ç™ºç’°å¢ƒ

```bash
# Flutterãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
flutter --version

# ãƒ‡ãƒã‚¤ã‚¹ç¢ºèª
flutter devices

# ä¾å­˜é–¢ä¿‚ã®ç¢ºèª
flutter doctor
```

### æœ¬ç•ªç’°å¢ƒ

```env
ENVIRONMENT=production
FIREBASE_MODE=production
BACKEND=firebase
DEBUG_MODE=false
```

### ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ

```env
ENVIRONMENT=staging
FIREBASE_MODE=production
BACKEND=firebase
DEBUG_MODE=true
```

---

Happy Coding! ğŸš€âœ¨